# hyprland configuration

# PROGRAMS {{{

$terminal = kitty
$fileManager = dolphin
$browser = firefox
$menu = rofi -show drun

# }}}

# MONITORS {{{

# Check for available monitors with `hyprctl monitors`. Can keep monitors from
# other systems if they do not overlap. Comments indicate the monitor.
monitor=DP-1,2560x1440@164.85,0x0,1  # pavilion
monitor=eDP-1,1920x1080@60.02,0x1080,1  # aspire
monitor=HDMI-A-1,1920x1080@60.00,0x0,1,mirror,eDP-1  # external screen

# }}}

# AUTOSTART {{{

exec-once = hyprpaper  # Show wallpaper
exec-once = ~/.config/waybar/reload.sh  # Show waybar and reload on config change
exec-once = nm-applet  # Show network manager applet in waybar
exec-once = wl-paste --watch cliphist store  # Copying with wl-paste adds to cliphist
exec-once = dunst  # Show notifications
exec-once = syncthingtray-qt6 --wait  # Show Syncthing tray icon

# Open browser on workspace 1
exec-once = [workspace 1 silent] $browser

# Open Obsidian devault (right), rmpc (top-left), and Spotify (bottom-left) on workspace 5. Spotify waits for Obsidian
# and rmpc to start, so Spotify moves in the expected tile. By default, the first window goes to the left, the second to
# the top-left, and the third to the bottom-left.
exec-once = [workspace 9 silent] xdg-open "obsidian://open?vault=devault"
exec-once = [workspace 10 silent] $terminal -e rmpc
exec-once = [workspace 10 silent] spotify || spotify-launcher

# No popup on update or donation request
ecosystem {
    no_update_news = true
    no_donation_nag = true
}

# }}}

# ENVIRONMENT VARIABLES {{{

# Size of cursor
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# }}}

# LOOK {{{

general {
    # No gaps between windows and screen edges
    gaps_in = 0
    gaps_out = 0

    # Border size and blue-green-ish color around focused window
    border_size = 3
    col.active_border = rgb(33ccff) rgb(00ff99) 30deg
    col.inactive_border = rgb(000000)

    # Holding border with mouse does not accidentially resize windows
    resize_on_border = false

    # Tearing is enabled and may be disabled if tearing actually occurs
    allow_tearing = true

    # Layout of windows is dwindle instead of master for improved flexibility
    layout = dwindle
}

decoration {
    # Disable rounded corners
    rounding = 0
    rounding_power = 0

    # Both focused and unfocused windows are fully opaque for maximum readability
    active_opacity = 1
    inactive_opacity = 1

    # Disable blur and shadow effects
    shadow {
        enabled = false
    }
    blur {
        enabled = false
    }
}

animations {
    enabled = yes

    # Curves used for animations. See https://www.cssportal.com/css-cubic-bezier-generator/.
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}

dwindle {
    pseudotile = false
    preserve_split = true
}

# Hide selection GUI when making a screenshot
layerrule = noanim, selection

# Cursor does not lag on external screen
cursor {
    no_hardware_cursors = 1
}

# Ignore maximize requests
windowrule = suppressevent maximize, class:.*

# Don't show border if there is only one window on the workspace
windowrule = noborder, onworkspace:w[1]

# Show different border color on floating window
windowrule = bordercolor rgb(ff0000) rgb(ee00ff) 30deg, floating:1

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

misc {
    disable_hyprland_logo = true
}

# }}}

# INPUT {{{

input {
    # By default, use DE keyboard layout, but allow switching to US layout with ALT+SPACE
    kb_layout = de,us
    kb_options = grp:alt_space_toggle

    # Mouse speed is default, without acceleration, and its position auto-focuses a window
    sensitivity = 0
    accel_profile = flat
    follow_mouse = 1

    # On touchpad, scroll in the expected direction and a bit slower
    touchpad {
        natural_scroll = true
        scroll_factor = 0.4
        middle_button_emulation = true
    }
}

# On laptop keyboard, use DE layout by default
device {
    name = at-translated-set-2-keyboard
    kb_layout = de,us
}

# On HyperX keyboard, use DE layout by default
device {
    name = kingston-hyperx-alloy-fps-rgb
    kb_layout = de,us
}


# On Glove80 keyboard, use US layout by default
device {
    name = glove80-keyboard
    kb_layout = us,de
}

# Use three fingers on touchpad to switch between workspaces
gestures {
    gesture = 3, horizontal, workspace
    workspace_swipe_distance = 200
}

# }}}

# KEYBINDINGS {{{

# Keybinds with SUPER and A-Z, optionally with SHIFT
bind = SUPER, A, exec, anki  # Open Anki
bind = SUPER SHIFT, A, exec, ~/.config/hypr/record.sh # Record rectangular video
bind = SUPER, B, exec, $terminal -e bluetui  # Manage bluetooth devices
bind = SUPER, C, killactive,  # Close current window
bind = SUPER SHIFT, C, forcekillactive,  # Force close current window
bind = SUPER, E, exec, $fileManager  # Open file manager
bind = SUPER SHIFT, E, exec, rofi -modi emoji -show emoji  # Show emoji picker
bind = SUPER, F, exec, $browser  # open browser
bind = SUPER SHIFT, F, exec, $browser "https://app.todoist.com/app/today" "https://calendar.google.com/" \
    "https://web.whatsapp.com/"  # Open browser with common websites
bind = SUPER, G, exec, gimp  # Open GIMP
bind = SUPER, H, exec, cliphist list | rofi -dmenu -i | cliphist decode | wl-copy  # Show clipboard history
bind = SUPER, J, togglesplit,  # Toggle vertical/horizontal split
bind = SUPER SHIFT, J, swapnext,  # Swap windows
bind = SUPER, K, exec, rofi -show calc -modi calc -no-show-match -no-sort  # Show calculator
bind = SUPER, L, exec, mpc pause && playerctl pause || true && hyprlock  # Show lock screen and pause music if playing
bind = SUPER, O, exec, ~/.config/hypr/open-obsidian-vault.sh  # Open obsidian vault
bind = SUPER, P, pseudo,  # Toggle window resizing
bind = SUPER SHIFT, P, pin,  # Toggle window pinning
bind = SUPER, Q, exec, $terminal -e tmux  # Open terminal with tmux
bind = SUPER, R, exec, $menu  # Show rofi application launcher
bind = SUPER, S, togglespecialworkspace, magic  # Toggle special workspace
bind = SUPER SHIFT, S, exec, slurp | grim -g - - | wl-copy  # Take rectangular screenshot
bind = SUPER, V, togglefloating,  # Toggle floating/aligned window
bind = SUPER, W, exec, pkill -USR1 waybar || waybar &  # toggle waybar, reload config

# Keybind with SUPER and Tab to cycle between windows in current workspace
bind = SUPER, Tab, cyclenext

# Keybinds with SUPER and arrow keys to select focused window
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Keybinds with SUPER and number to switch between workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Keybinds with SUPER, SHIFT, and number to move window to workspace
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

# Keybinds with ALT and mouse to move and resize with SHIFT. mouse:272 is LMB.
bindm = ALT, mouse:272, movewindow
bindm = ALT SHIFT, mouse:272, resizewindow

# Keybinds with audio multimedia keys for volume. Smaller steps than 2% are not possible.
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Keybind with microphone mute key
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Keybinds with multimedia keys for brightness control. TODO: Remove one of the two versions.
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-
bind = , XF86KbdBrightnessUp, exec, brightnessctl set 10%+
bind = , XF86KbdBrightnessDown, exec, brightnessctl set 10%-

# Keybinds with player buttons. By default for playerctl, with SHIFT for mpc.
bindl = , XF86AudioNext, exec, playerctl next
bindl = SHIFT, XF86AudioNext, exec, mpc next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = SHIFT, XF86AudioPause, exec, mpc toggle
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = SHIFT, XF86AudioPlay, exec, mpc toggle
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = SHIFT, XF86AudioPrev, exec, mpc prev

# Closing lid of laptop screen. TODO: Check if this actually works.
bindl = , switch:off:Lid Switch, exec, ~/.config/hypr/lid.sh open
bindl = , switch:on:Lid Switch, exec, ~/.config/hypr/lid.sh close

# }}}
