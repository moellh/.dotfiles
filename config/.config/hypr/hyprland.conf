# hyprland configuration

# PROGRAMS {{{

$terminal = kitty
$fileManager = dolphin
$browser = firefox
$menu = rofi -show drun

# }}}

# MONITORS {{{

# Check for available monitors with `hyprctl monitors`. Can keep monitors from
# other systems if they do not overlap. Comments indicate the monitor.
monitor=DP-1,2560x1440@164.85,0x0,1  # pavilion
monitor=eDP-1,1920x1080@60.02,0x1080,1  # aspire
monitor=HDMI-A-1,1920x1080@60.00,0x0,1,mirror,eDP-1  # external screen

# }}}

# AUTOSTART {{{

exec-once = hyprpaper  # Show wallpaper
exec-once = ~/.config/waybar/reload.sh  # Show waybar and reload on config change
exec-once = nm-applet  # Show network manager applet in waybar
exec-once = wl-paste --watch cliphist store  # Copying with wl-paste adds to cliphist
exec-once = dunst  # Show notifications

exec-once = [workspace 1 silent] $browser "https://app.todoist.com/app/today" "https://calendar.google.com/" \
    "https://track.toggl.com/timer" "https://web.whatsapp.com/"

# }}}

# ENVIRONMENT VARIABLES {{{

# Size of cursor
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Show programs installed with pacman or yay
env = XDG_MENU_PREFIX,arch-

# }}}

# LOOK {{{

general {
    # No gaps between windows and screen edges
    gaps_in = 0
    gaps_out = 0

    # Border size and blue-green-ish color around focused window
    border_size = 3
    col.active_border = rgb(333333)
    col.inactive_border = rgb(000000)

    # Holding border with mouse does not accidentially resize windows
    resize_on_border = false

    # Tearing is enabled and may be disabled if tearing actually occurs
    allow_tearing = true

    # Layout of windows is dwindle instead of master for improved flexibility
    layout = dwindle
}

decoration {
    # Minimal rounding of window corners
    rounding = 10
    rounding_power = 2

    # Both focused and unfocused windows are fully opaque for maximum readability
    active_opacity = 1
    inactive_opacity = 1

    # Disable blur and shadow effects
    shadow {
        enabled = false
    }
    blur {
        enabled = false
    }
}

animations {
    enabled = yes

    # Curves used for animations. See https://www.cssportal.com/css-cubic-bezier-generator/.
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}

dwindle {
    pseudotile = true
    preserve_split = true
}

# }}}

# INPUT {{{

input {
    # By default, use DE keyboard layout, but allow switching to US layout with ALT+SPACE
    kb_layout = de,us
    kb_options = grp:alt_space_toggle

    # Mouse speed is default, without acceleration, and its position auto-focuses a window
    sensitivity = 0
    accel_profile = flat
    follow_mouse = 1

    # On touchpad, scroll in the expected direction and a bit slower
    touchpad {
        natural_scroll = true
        scroll_factor = 0.4
    }
}

# On Glove80 keyboard, use US layout by default
input {
    kb_model = glove80-keyboard
    kb_layout = us,de
}

# Use three fingers on touchpad to switch between workspaces
gestures {
    workspace_swipe = true
}

# }}}

# KEYBINDINGS {{{
# Sorted by A-Z for letter pressed apart from modifier keys

bind = SUPER, A, exec, anki  # Open Anki
bind = SUPER SHIFT, A, exec, ~/.config/hypr/record.sh # Record rectangular video
bind = SUPER, B, exec, $terminal -e bluetui  # Manage bluetooth devices
bind = SUPER, C, killactive,  # Close current window
bind = SUPER, E, exec, $fileManager  # Open file manager
bind = SUPER SHIFT, E, exec, rofi -modi emoji -show emoji  # Show emoji picker
bind = SUPER, F, exec, $browser  # open browser
bind = SUPER SHIFT, F, exec, $browser "https://app.todoist.com/app/today" "https://calendar.google.com/" \
    "https://track.toggl.com/timer" "https://web.whatsapp.com/"  # Open browser with common websites
bind = SUPER, G, exec, gimp # Open GIMP
bind = SUPER, J, togglesplit,  # Toggle vertical/horizontal split
bind = SUPER, L, exec, mpc pause && playerctl pause || true && hyprlock  # Show lock screen and pause music if playing
bind = SUPER, O, exec, ~/.config/hypr/open-obsidian-vault.sh  # Open obsidian vault
bind = SUPER, P, pseudo,  # Toggle window resizing
bind = SUPER, Q, exec, $terminal -e tmux  # Open terminal with tmux
bind = SUPER, R, exec, $menu  # Show rofi application launcher
# bind = SUPER, S, exec, spotify-launcher  # start Spotify
bind = SUPER, V, togglefloating,  # toggle floating/aligned window
bind = SUPER, W, exec, pkill -USR1 waybar || waybar &  # toggle waybar, reload config

# Select focused window with SUPER + arrow keys
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Switch workspaces with SUPER + [0-9]
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move active window to a workspace with SUPER + SHIFT + [0-9]
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

bind = SUPER, S, togglespecialworkspace, magic
bind = SUPER SHIFT, S, movetoworkspace, special:magic
bind = SUPER SHIFT, S, movetoworkspace, +0

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = ALT, mouse:272, movewindow
bindm = ALT SHIFT, mouse:272, resizewindow

# Use multimedia keys for volume. Smaller steps than 2% are not possible.
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Use multimedia keys for microphone.
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Use laptop multimedia keys for brightness control.
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-

# Use Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next || mpc next
bindl = , XF86AudioPause, exec,  playerctl play-pause || mpc toggle
bindl = , XF86AudioPlay, exec,  playerctl play-pause || mpc toggle
bindl = , XF86AudioPrev, exec, playerctl previous || mpc prev

# Brightness
bind = , XF86KbdBrightnessUp, exec, brightnessctl set 10%+
bind = , XF86KbdBrightnessDown, exec, brightnessctl set 10%-

# Closing lid of laptop screen
bindl=,switch:off:Lid Switch,exec,~/.config/hypr/lid.sh open
bindl=,switch:on:Lid Switch,exec,~/.config/hypr/lid.sh close

# Rectangular screenshot
layerrule = noanim, slurp
layerrule = noanim, selection
layerrule = noanim, grim
# bind = SUPER SHIFT, S, exec, slurp | grim -g - - | wl-copy
bind = SUPER, H, exec, cliphist list | rofi -dmenu -i | cliphist decode | wl-copy
bind = SUPER, K, exec, rofi -show calc -modi calc -no-show-match -no-sort

# }}}


# WINDOWS AND WORKSPACES

# Example windowrule
# windowrule = float,class:^(kitty)$,title:^(kitty)$

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*
windowrulev2 = noborder, onworkspace:w[t1]

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Cursor does not lag on external screen (Maybe change to 1 on issues)
cursor {
    no_hardware_cursors = 2
}

# No popup on update or donation request
ecosystem {
    no_update_news = true
    no_donation_nag = true
}

# Further topics:
#
# https://wiki.hyprland.org/Configuring/Environment-variables/
# https://wiki.hyprland.org/Configuring/Keywords/
# https://wiki.hyprland.org/Configuring/Monitors/
# Refer to https://wiki.hyprland.org/Configuring/Variables/
# https://wiki.hyprland.org/Configuring/Variables/#gestures
# https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs
# https://wiki.hyprland.org/Configuring/Variables/#input
# https://wiki.hyprland.org/Configuring/Variables/#general
# https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
# Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
# https://wiki.hyprland.org/Configuring/Variables/#misc
# https://wiki.hyprland.org/Configuring/Variables/#decoration
# https://wiki.hyprland.org/Configuring/Variables/#blur
# https://wiki.hyprland.org/Configuring/Variables/#animations
# Default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more
# https://wiki.hyprland.org/Configuring/Window-Rules/
# https://wiki.hyprland.org/Configuring/Workspace-Rules/
# https://wiki.hyprland.org/Configuring/Binds/
